"use strict";!function(e){function o(e){return new o.prototype.init(e)}o.extend=(o.prototype={constructor:o,version:"1.0.0",owner:"antmoe",repo:"friend",direction_sort:"desc",page:1,per_page:100,el:"",text:[],labelDescr:{},init:function(e){for(var t in e)this[t]=e[t];return o.setHead(this),o.getPageFriend(this),this}}).extend=function(e){for(var t in e)this[t]=e[t]},o.extend({setHead:function(){o.loadingCss()},loadingCss:function(){$("head").append("<style>.loader{width:150px;height:150px;margin:0 auto}svg{width:90%;fill:none}.load{transform-origin:50% 50%;stroke-dasharray:570;stroke-width:20px}.load.one{stroke:#554d73;animation:load 1.5s infinite}.load.two{stroke:#a496a4;animation:load 1.5s infinite;animation-delay:.1s}.load.three{stroke:#a5a7bb;animation:load 1.5s infinite;animation-delay:.2s}.point{animation:bounce 1s infinite ease-in-out}.point.one{fill:#a5a7bb;animation-delay:0s}.point.two{fill:#a496a4;animation-delay:.1s}.point.three{fill:#554d73;animation-delay:.2s}@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-20px)}}@keyframes load{0%{stroke-dashoffset:570}50%{stroke-dashoffset:530}100%{stroke-dashoffset:570;transform:rotate(360deg)}}</style>")},loading:function(e){$("".concat(e.el)).html('<div class="loader"><svg viewBox="0 0 120 120" version="1.1" xmlns="http://www.w3.org/2000/svg"><circle class="load one" cx="60" cy="60" r="40"></circle><circle class="load two" cx="60" cy="60" r="40"></circle><circle class="load three" cx="60" cy="60" r="40"></circle><g><circle class="point one" cx="45" cy="70" r="5"></circle><circle class="point two" cx="60" cy="70" r="5"></circle><circle class="point three" cx="75" cy="70" r="5"></circle></g></svg></div>')}}),o.extend({createFriend:function(e){var t,n=e.text;for(var a in $(".loader").hide(),n)n[a].labels&&(t=n[a].body,$("#"+n[a].labels).length?$("#".concat(n[a].labels)).next().next().append(t):$(e.el).append("<h2 id=".concat(n[a].labels,">").concat(n[a].labels,'</h2><div class="flink-desc"><h4>').concat(o.getLabelDescr(e,n[a].labels),'</h4></div><div class="flink-list">')+t+"</div>"))},getPageFriend:function(e){o.loading(e),o.getFriends(e).then(function(){return o.createFriend(e)})}}),o.extend({getFriends:function(a){return $.ajax({url:"https://gitee.com/api/v5/repos/".concat(a.owner,"/").concat(a.repo,"/issues?state=open&sort=created&direction=").concat(a.direction_sort,"&page=").concat(a.page,"&per_page=").concat(a.per_page),type:"get",success:function(e){if(a.text=[],e)for(var t in e){var n={};n.body=o.getBody(a,e[t].body),n.labels=o.getLabels(e[t].labels),a.text.push(n)}}})}}),o.extend({getBody:function(e,t){var n=o.getUrl(t),a=o.getName(t),r=o.getAvatar(t),i=o.getDescription(t);return'<div class="flink-list-item"><a href="'.concat(n,'" title="').concat(a,'" target="_blank"><img class="rauto" data-lazy-src="').concat(r,'" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile1/imgbed/2020/03/21/20200321213747.gif&quot;" alt="').concat(a,'" src="').concat(r,'"><span class="flink-item-name">').concat(a,'</span><span class="flink-item-desc" title="').concat(i,'">').concat(i,"</span></a></div>")},getLabels:function(e){if(e.length)return e[0].name}}),o.extend({getUrl:function(e){var t="URL好像写的不对哦！";return(e=e.match(/link:[^\n]*\n/))&&0<e.length&&(t=e[0].replace(/(link: [\s]*|[\r\n]*)/g,"")),t},getName:function(e){var t="名称好像写的不对哦！";return(e=e.match(/name:[^\n]*\n/))&&0<e.length&&(t=e[0].replace(/(name:[\s]*|[\r\n]*)/g,"")),t},getAvatar:function(e){var t="头像好像写的不对哦！";return(e=e.match(/avatar:[^\n]*\n/))&&0<e.length&&(t=e[0].replace(/(avatar:[\s]*|[\r\n]*)/g,"")),t},getDescription:function(e){var t="描述好像写的不对哦！";return(e=e.match(/descr:[^\n]*/))&&0<e.length&&(t=e[0].replace(/(descr:[\s]*|[\r\n]*)/g,"")),t},getLabelDescr:function(e,t){var n="";return e.labelDescr[t]&&(n=e.labelDescr[t]),n}}),o.prototype.extend({s:1}),o.prototype.init.prototype=o.prototype,e.Friend=o}(window);